(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{129:function(e,t){},161:function(e,t,n){},167:function(e,t,n){},171:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),o=n(18),c=n.n(o),u=n(175),i=n(10),l=n(21),s=n(69),p=n.n(s),f=n(70),d=n(71),h={isLoading:!1},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"SET_LOADING":return{isLoading:r.isLoading};default:return e}},v=n(6),E={user:null},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"SIGN_IN":return Object(v.a)({},e,{user:r.user});case"SIGN_OUT":return E;default:return e}},O=n(24),w=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"createdAt",r=e[n],a=t[n];return r<a?1:r>a?-1:0},y={polls:[]},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"GET_POLLS":return Object(v.a)({},e,{polls:r.polls});case"CREATE_POLLS":return Object(v.a)({},e,{polls:e.polls.concat([r.poll]).sort(w)});case"UPDATE_POLLS":return Object(v.a)({},e,{polls:function(e,t){var n=Object(O.a)(e),r=n.findIndex(function(e){return e._id===t._id});return r<0?(n.push(t),n):(n[r]=t,n)}(e.polls,r.poll)});case"REMOVE_POLLS":return Object(v.a)({},e,{polls:e.polls.filter(function(e){return e._id!==r.id})});default:return e}},P={questions:[]},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"CREATE_QUESTION":return Object(v.a)({},e,{questions:e.questions.concat([r.question])});case"UPDATE_QUESTION":return Object(v.a)({},e,{questions:function(e,t){var n=Object(O.a)(e),r=n.findIndex(function(e){return e._id===t._id});return r<0?(n.push(t),n):(n[r]=t,n)}(e.questions,r.question)});case"REMOVE_QUESTION":return Object(v.a)({},e,{questions:e.questions.filter(function(e){return e._id!==r.id})});default:return e}},L={answers:[]},j=function(e,t){var n=Object(O.a)(e),r=n.findIndex(function(e){return e._id===t._id});return r<0?(n.push(t),n):(n[r]=t,n)},T=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,r=arguments.length>1?arguments[1]:void 0,a=r.type,o=r.payload;switch(a){case"CREATE_ANSWER":return Object(v.a)({},n,{answers:n.answers.concat([o.answer])});case"UPDATE_ANSWER":return Object(v.a)({},n,{answers:j(n.answers,o.answer)});case"UPDATE_ANSWERS":return Object(v.a)({},n,{answers:(e=n.answers,t=o.answers,t.reduce(function(e,t){return j(e,t)},e))});case"REMOVE_ANSWER":return Object(v.a)({},n,{answers:n.answers.filter(function(e){return e._id!==o.id})});default:return n}},k=Object(l.createStore)(Object(l.combineReducers)({loader:m,auth:b,polls:g,questions:_,answers:T}),Object(d.composeWithDevTools)(Object(l.applyMiddleware)(f.a,p.a))),x=n(176),I=n(172),A=n(174),N=n(0),S=n(4),C=n.n(S),R=n(5),U=function(e){return{type:"SET_LOADING",payload:{isLoading:e}}},q=function(e){return function(){var t=Object(R.a)(C.a.mark(function t(n){return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n(U(e)));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},D=Object(i.b)(null,{switchLoader:q}),M=n(72),G=n.n(M),Q={SIGN_IN:"".concat("/api/v1","/auth/sign-in"),SIGN_OUT:"".concat("/api/v1","/auth/sign-out"),AUTH:"".concat("/api/v1","/auth/user"),POLLS_CREATE:"".concat("/api/v1","/polls/create"),POLLS_LIST:"".concat("/api/v1","/polls/list"),POLL_ITEM:"".concat("/api/v1","/polls"),POLLS_UPDATE:"".concat("/api/v1","/polls"),QUESTION_CREATE:"".concat("/api/v1","/questions/create"),QUESTION_ITEM:"".concat("/api/v1","/questions"),ANSWER_CREATE:"".concat("/api/v1","/answers/create"),ANSWER_ITEM:"".concat("/api/v1","/answers")},W=n(73),V=n.n(W),B="".concat(window.location.hostname,":").concat(window.location.port),F=V()(B),H=function(){return window.localStorage.getItem("token")},z=function(e){return window.localStorage.setItem("token",e)},J=function(e){var t=e||H();return{Authorization:"Bearer ".concat(t)}},Y=n(28),K=n.n(Y),X=function(e){K.a.error(e.message||e.error)},Z=function(){var e=Object(R.a)(C.a.mark(function e(t,n,r,a){var o,c;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,q(!0)(a),o=J(),e.next=5,G()({url:"".concat("").concat(n),data:r,method:t,headers:o});case 5:return c=e.sent,q(!1)(a),e.abrupt("return",c);case 10:throw e.prev=10,e.t0=e.catch(0),X(e.t0),q(!1)(a),e.t0;case 15:case"end":return e.stop()}},e,this,[[0,10]])}));return function(t,n,r,a){return e.apply(this,arguments)}}(),$=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Z.apply(void 0,["get",e,null].concat(n))},ee=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Z.apply(void 0,["post",e].concat(n))},te=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Z.apply(void 0,["delete",e].concat(n))},ne=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Z.apply(void 0,["patch",e].concat(n))},re=function(e){return{type:"SIGN_IN",payload:{user:e}}},ae=n(31),oe=function(e){e.history,e.user,e.unsetUser,e.setLoading,Object(ae.a)(e,["history","user","unsetUser","setLoading"]);return a.a.createElement("div",null,"Home")},ce=function(e){return a.a.createElement(oe,e)},ue=n(13),ie=n(14),le=n(16),se=n(15),pe=n(17),fe=n(3),de=n(41),he=n.n(de),me=n(135),ve=function(e){var t=e.to,n=e.children,r=e.label,o=Object(ae.a)(e,["to","children","label"]);return a.a.createElement(me.a,{to:t,style:{color:"#fff"}},n&&a.a.createElement(fe.a,o,n),!n&&a.a.createElement(fe.a,o,r))};ve.defaultProps=Object(v.a)({to:"/"},fe.a.defaultProps);var Ee=ve,be=function(e){var t=e.poll,n=e.onPublicityToggle,r=e.name,o=e.className;return a.a.createElement(fe.h,{type:"checkbox",className:o,id:function(e){return"checkbox-".concat(e._id)}(t),name:r,checked:t.isPublic,onChange:n,label:"Public",inline:!0})},Oe=function(e){return"".concat(function(e){return he.a.duration(new Date-e).humanize()}(e)," ago")},we=function(e){var t=e.poll,n=e.onPublicityToggle,r=e.userId,o=e.onRemove,c=t.createdBy===r;return a.a.createElement(fe.e,{xs:12,className:"m-b-20"},a.a.createElement(fe.b,{body:!0},a.a.createElement(fe.d,null,t.title||"No title"),a.a.createElement(fe.c,null,Oe(he()(t.createdAt))),a.a.createElement(fe.m,null,(c||t.isPublic)&&a.a.createElement(Ee,{outline:!0,to:"vote/".concat(t._id),label:"Open"}),c&&a.a.createElement(Ee,{outline:!0,className:"m-1",to:"edit-poll/".concat(t._id),label:"Edit"}),c&&a.a.createElement(fe.a,{outline:!0,color:"danger",onClick:o},"Remove"),c&&a.a.createElement(be,{poll:t,onPublicityToggle:function(){return n(t,!t.isPublic)},className:"m-4"}))))};we.defaultProps={onPublicityToggle:function(){return!0}};var ye=we,ge=function(e){var t=e.noItemsText;return a.a.createElement("h3",{className:"col"},t)};ge.defaultProps={noItemsText:"No items"};var Pe=ge,_e=function(e){function t(){var e,n;Object(ue.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(le.a)(this,(e=Object(se.a)(t)).call.apply(e,[this].concat(a)))).onPublicityToggle=function(){var e=Object(R.a)(C.a.mark(function e(t,r){return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(0,n.props.updatePoll)(t._id,{isPublic:r});case 2:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),n.createPoll=Object(R.a)(C.a.mark(function e(){var t,r,a;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=n.props,r=t.createPoll,a=t.history,r(a);case 2:case"end":return e.stop()}},e,this)})),n}return Object(pe.a)(t,e),Object(ie.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.getPolls)()}},{key:"render",value:function(){var e=this,t=this.props,n=t.polls,r=t.showPrivate,o=t.user,c=t.removePoll,u=r?n.filter(function(e){return e.createdBy===o._id}):n.filter(function(e){return!!e.isPublic});return a.a.createElement(fe.g,null,a.a.createElement(fe.t,null,u&&u.length>0?u.map(function(t){return a.a.createElement(ye,{key:t._id,poll:t,onPublicityToggle:e.onPublicityToggle,userId:o._id,onRemove:function(){return c(t._id)}})}):a.a.createElement(Pe,null)),a.a.createElement(fe.a,{onClick:this.createPoll,style:{position:"fixed",bottom:"20px",right:"20px"}},"ADD"))}}]),t}(a.a.Component),Le=function(e){return{type:"CREATE_QUESTION",payload:{question:e}}},je=function(e){return{type:"UPDATE_QUESTION",payload:{question:e}}},Te=function(e){return{type:"REMOVE_QUESTION",payload:{id:e}}},ke=function(e){return{type:"CREATE_ANSWER",payload:{answer:e}}},xe=function(e){return{type:"UPDATE_ANSWER",payload:{answer:e}}},Ie=function(e){return{type:"UPDATE_ANSWERS",payload:{answers:e}}},Ae=function(e){return{type:"REMOVE_ANSWER",payload:{id:e}}},Ne=function(e){return{type:"GET_POLLS",payload:{polls:e}}},Se=function(e){return{type:"CREATE_POLLS",payload:{poll:e}}},Ce=function(e){return{type:"UPDATE_POLLS",payload:{poll:e}}},Re=function(e){return{type:"REMOVE_POLLS",payload:{id:e}}},Ue=Object(i.b)(function(e){return{polls:e.polls.polls}},{createPoll:function(e){return function(){var t=Object(R.a)(C.a.mark(function t(n){var r,a;return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ee(Q.POLLS_CREATE,{},n);case 2:r=t.sent,a=r.data.poll,n(Se(a)),e.push(at.replace(/:id/,a._id));case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},updatePoll:function(e,t){return function(){var n=Object(R.a)(C.a.mark(function n(r){var a,o;return C.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ne("".concat(Q.POLLS_UPDATE,"/").concat(e),t,r);case 2:a=n.sent,o=a.data,r(Ce(o.poll));case 5:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}()},removePoll:function(e){return function(){var t=Object(R.a)(C.a.mark(function t(n){return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,te("".concat(Q.POLL_ITEM,"/").concat(e),{},n);case 2:n(Re(e));case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},getPolls:function(){return function(){var e=Object(R.a)(C.a.mark(function e(t){var n,r;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$(Q.POLLS_LIST,t);case 2:n=e.sent,r=n.data.polls,t(Ne(r));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},getPollToEdit:function(e){return function(){var t=Object(R.a)(C.a.mark(function t(n){var r,a,o,c,u;return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$("".concat(Q.POLL_ITEM,"/").concat(e),n);case 2:r=t.sent,a=r.data,o=a.poll,c=a.question,u=a.answers,n(Ce(o)),c&&n(je(c)),u&&n(Ie(u));case 8:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}}),qe=Ue(function(e){return a.a.createElement(_e,Object.assign({},e,{showPrivate:!0}))}),De=Ue(function(e){return a.a.createElement(_e,e)}),Me=n(20),Ge=n(27),Qe=n.n(Ge),We=function(e,t,n){return e.find(function(e){return e[t]===n})},Ve=Object(i.b)(function(e,t){var n=e.questions,r=t.pollId;return{question:We(n.questions,"pollId",r)}},{createQuestion:function(e){return function(){var t=Object(R.a)(C.a.mark(function t(n){var r,a;return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ee(Q.QUESTION_CREATE,{pollId:e},n);case 2:r=t.sent,a=r.data.question,n(Le(a));case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},removeQuestion:function(e){return function(){var t=Object(R.a)(C.a.mark(function t(n){return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,te("".concat(Q.QUESTION_ITEM,"/").concat(e),{},n);case 2:n(Te(e));case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},updateQuestion:function(e,t){return function(){var n=Object(R.a)(C.a.mark(function n(r){var a,o;return C.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ne("".concat(Q.QUESTION_ITEM,"/").concat(e),t,r);case 2:a=n.sent,o=a.data,r(je(o.question));case 5:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}()}}),Be=function(e){function t(){var e,n;Object(ue.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(le.a)(this,(e=Object(se.a)(t)).call.apply(e,[this].concat(a)))).state={value:n.props.value},n.onChangeDebounced=Qe.a.debounce(n.props.onChange,n.props.delay),n.onChange=function(e){var t=e.target,r=t.value,a=t.name,o=t.checked;n.setState({value:r}),n.onChangeDebounced({target:{value:r,name:a,checked:o}})},n}return Object(pe.a)(t,e),Object(ie.a)(t,[{key:"render",value:function(){var e=this.props,t=e.type,n=e.name,r=e.id,o=e.placeholder,c=this.state.value;return a.a.createElement(fe.n,{id:r,type:t,name:n,value:c,placeholder:o,onChange:this.onChange})}}]),t}(r.Component);Be.defaultProps={value:"",delay:400};var Fe=Be,He=function(e){var t=e.answer,n=e.onRemove,r=e.onUpdate;return a.a.createElement(fe.m,null,a.a.createElement(fe.o,{for:"answerTitle"},"Answer"),a.a.createElement(fe.t,null,a.a.createElement(fe.e,{sm:10},a.a.createElement(Fe,{type:"text",name:"title",id:t._id,placeholder:"Answer text",value:t.title,onChange:r(t._id)})),a.a.createElement(fe.a,{close:!0,sm:1,onClick:function(){return n(t._id)}})))},ze=Object(i.b)(function(e,t){var n,r,a,o=e.answers,c=t.questionId;return{answers:(n=o.answers,r="questionId",a=c,n.filter(function(e){return e[r]===a}))}},{createAnswer:function(e){return function(){var t=Object(R.a)(C.a.mark(function t(n){var r,a;return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ee(Q.ANSWER_CREATE,{questionId:e},n);case 2:r=t.sent,a=r.data.answer,n(ke(a));case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},removeAnswer:function(e){return function(){var t=Object(R.a)(C.a.mark(function t(n){return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,te("".concat(Q.ANSWER_ITEM,"/").concat(e),{},n);case 2:n(Ae(e));case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},updateAnswer:function(e,t){return function(){var n=Object(R.a)(C.a.mark(function n(r){var a,o;return C.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ne("".concat(Q.ANSWER_ITEM,"/").concat(e),t,r);case 2:a=n.sent,o=a.data.answer,r(xe(o));case 5:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}()}}),Je=function(e){var t=e.answers,n=e.questionId,r=e.createAnswer,o=e.removeAnswer,c=e.updateAnswer,u=function(e){return function(t){var n=t.target,r=n.name,a=n.value,o=n.checked;c(e,Object(Me.a)({},r,"showResult"===r?o:a))}};return a.a.createElement("div",{className:"p-3"},t.length?t.map(function(e){return a.a.createElement(He,{key:e._id,answer:e,onRemove:o,onUpdate:u})}):a.a.createElement("h3",null,"No answers"),a.a.createElement(fe.a,{onClick:function(){return r(n)}},"Add answer"))};Je.defaultProps={answers:[]};var Ye=ze(Je),Ke=Ve(function(e){var t=e.pollId,n=e.question,r=e.createQuestion,o=e.removeQuestion,c=e.updateQuestion,u=function(e){return function(t){var n=t.target,r=n.name,a=n.value,o=n.checked;c(e,Object(Me.a)({},r,"showResult"===r?o:a))}};return n?a.a.createElement(fe.m,null,a.a.createElement("div",null,a.a.createElement(fe.m,null,a.a.createElement(fe.o,{for:"questionTitle"},"Question"),a.a.createElement(fe.t,null,a.a.createElement(fe.e,{sm:11},a.a.createElement(Fe,{id:"".concat(n._id,"-title"),type:"text",name:"title",placeholder:"Question text",onChange:u(n._id)})),a.a.createElement(fe.a,{close:!0,sm:1,onClick:function(){return o(n._id)}}))),a.a.createElement(fe.m,null,a.a.createElement(fe.h,{type:"checkbox",label:"Show voting results",inline:!0,id:"".concat(n._id,"-publish"),name:"showResult",checked:n.showResult,onChange:u(n._id)})),a.a.createElement(Ye,{questionId:n._id}))):a.a.createElement("div",null,a.a.createElement("h3",null,"No questions"),a.a.createElement(fe.a,{onClick:function(){return r(t)}},"Add question"))}),Xe=function(e){function t(){var e,n;Object(ue.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(le.a)(this,(e=Object(se.a)(t)).call.apply(e,[this].concat(a)))).getPollId=function(){return n.props.match.params.id},n.getCurrentPoll=function(){var e=n.props.polls,t=n.getPollId();return We(e,"_id",t)},n.onChangePoll=function(e){return function(t){var r=t.target,a=n.props.updatePoll,o=r.name,c=r.value,u=r.checked;a(e,Object(Me.a)({},o,"isPublic"===o?u:c))}},n}return Object(pe.a)(t,e),Object(ie.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.getPollToEdit)(this.getPollId())}},{key:"render",value:function(){var e=this.getPollId(),t=this.getCurrentPoll();return t?a.a.createElement(fe.g,{className:"mt-5"},a.a.createElement(fe.l,null,a.a.createElement(fe.m,{row:!0},a.a.createElement(fe.o,{for:"editTitle"},"TITLE"),a.a.createElement(Fe,{type:"text",name:"title",id:e,placeholder:"Poll title",value:t.title,onChange:this.onChangePoll(t._id)})),a.a.createElement(fe.m,{row:!0},a.a.createElement(be,{poll:t,onPublicityToggle:this.onChangePoll(t._id),name:"isPublic"})),a.a.createElement(Ke,{pollId:e})),a.a.createElement(fe.a,{onClick:this.createPoll,style:{position:"fixed",bottom:"20px",right:"20px"},disabled:!0},"SAVE")):null}}]),t}(a.a.Component),Ze=A.a(Ue)(function(e){return a.a.createElement(Xe,e)}),$e=function(e){return a.a.createElement("div",null,"Page Not Found")},et=n(75),tt=n(76),nt=function(e){function t(){return Object(ue.a)(this,t),Object(le.a)(this,Object(se.a)(t).apply(this,arguments))}return Object(pe.a)(t,e),Object(ie.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.checkUser,n=e.history;t(function(){return n.push(rt)})}},{key:"render",value:function(){var e=this.props,t=e.history,n=e.onGoogleResponse;return a.a.createElement(et.GoogleLogin,{clientId:tt.GOOGLE_CLIENT_ID,buttonText:"Login with Google",onSuccess:function(e){return n(e,t.push)},onFailure:X})}}]),t}(r.Component),rt="/",at="/edit-poll/:id",ot=[{title:"Home",path:rt,component:ce,exact:!0},{title:"My Polls",path:"/my-polls",component:qe},{title:"Public Polls",path:"/public-polls",component:De},{title:"Public Polls",path:at,component:Ze}],ct=[{title:"Login",path:"/login",component:function(e){return a.a.createElement(nt,e)},exact:!0},{title:"Not Found",path:"*",component:$e}],ut={POLL_UNPUBLIC:"poll-unpublic",POLL_ON_PUBLIC:"poll-on-public",POLL_UPDATE:"poll-update",POLL_REMOVE:"poll-remove"},it=ut.POLL_ON_PUBLIC,lt=ut.POLL_REMOVE,st=ut.POLL_UNPUBLIC,pt=ut.POLL_UPDATE,ft=function(e){F.removeListener(it),F.on(it,function(t){var n=t.poll;return console.log("public"),function(e){return function(){var t=Object(R.a)(C.a.mark(function t(n){return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n(Se(e)));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}(n)(e)})},dt=function(e){F.removeListener(st),F.on(st,function(t){var n=t.poll;return console.log("unpublic"),function(e){return function(){var t=Object(R.a)(C.a.mark(function t(n){return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n(Re(e._id)));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}(n)(e)})},ht=function(e){F.removeListener(lt),F.on(lt,function(t){var n,r=t.poll;return console.log("remove"),(n=r._id,function(){var e=Object(R.a)(C.a.mark(function e(t){return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(Re(n)));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())(e)})},mt=function(e){F.removeListener(pt),F.on(pt,function(t){var n=t.poll;return console.log("upddate"),function(e){return function(){var t=Object(R.a)(C.a.mark(function t(n){return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n(Ce(e)));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}(n)(e)})},vt=function(e,t){F.emit("authenticate",{token:e}),ht(t),mt(t),ft(t),dt(t)},Et=function(e){return function(){var t=Object(R.a)(C.a.mark(function t(n){var r,a,o,c;return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=H(),t.prev=1,!r){t.next=11;break}return t.next=5,$(Q.AUTH,n);case 5:a=t.sent,o=a.data,c=o.user,n(re(c)),vt(r,n),"function"===typeof e&&e();case 11:t.next=16;break;case 13:throw t.prev=13,t.t0=t.catch(1),t.t0;case 16:case"end":return t.stop()}},t,this,[[1,13]])}));return function(e){return t.apply(this,arguments)}}()},bt=Object(i.b)(function(e){return{user:e.auth.user}},{onGoogleResponse:function(e,t){return function(){var n=Object(R.a)(C.a.mark(function n(r){var a,o,c,u;return C.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,ee(Q.SIGN_IN,{access_token:e.accessToken},r);case 3:return a=n.sent,o=a.data,c=o.user,u=o.token,z(u),r(re(c)),vt(u,r),n.abrupt("return",t(rt));case 12:throw n.prev=12,n.t0=n.catch(0),n.t0;case 15:case"end":return n.stop()}},n,this,[[0,12]])}));return function(e){return n.apply(this,arguments)}}()},getUser:function(e){return function(){var t=Object(R.a)(C.a.mark(function t(n){var r;return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=H(),t.prev=1,t.abrupt("return",r?Et()(n):e("/login"));case 5:throw t.prev=5,t.t0=t.catch(1),e("/login"),t.t0;case 9:case"end":return t.stop()}},t,this,[[1,5]])}));return function(e){return t.apply(this,arguments)}}()},onLogout:function(){return function(){var e=Object(R.a)(C.a.mark(function e(t){return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ee(Q.SIGN_OUT,{},t);case 3:z(""),t({type:"SIGN_OUT",payload:{user:void 0}}),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},checkUser:Et}),Ot=A.a(D,bt);Ot.propTypes={Component:N.element.isRequired};var wt=Ot,yt=n(173),gt=[{url:"/my-polls",title:"MY POLLS"},{url:"/public-polls",title:"PUBLIC POLLS"}],Pt=function(e){function t(){var e,n;Object(ue.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(le.a)(this,(e=Object(se.a)(t)).call.apply(e,[this].concat(a)))).state={isOpen:!1},n.toggle=function(){return n.setState({isOpen:!n.state.isOpen})},n}return Object(pe.a)(t,e),Object(ie.a)(t,[{key:"render",value:function(){var e=this.props,t=e.user,n=e.onLogout,r=this.state.isOpen;return a.a.createElement("div",null,a.a.createElement(fe.r,{color:"light",light:!0,expand:"md"},a.a.createElement(me.a,{to:"/"},"VoteApp"),a.a.createElement(fe.s,{onClick:this.toggle}),a.a.createElement(fe.f,{isOpen:r,navbar:!0},a.a.createElement(fe.p,{className:"ml-auto",navbar:!0},t&&gt.map(function(e,t){return a.a.createElement(fe.q,{key:t},a.a.createElement(yt.a,{activeClassName:"active",className:"nav-link ml-2 ml-lg-1 fz-18 fw-500",exact:!0,to:e.url},e.title))}),t&&a.a.createElement(fe.u,{nav:!0,inNavbar:!0},a.a.createElement(fe.k,{nav:!0,caret:!0},t.fullName),a.a.createElement(fe.j,{right:!0},a.a.createElement(fe.i,null,t.email),a.a.createElement(fe.i,{divider:!0}),a.a.createElement(fe.i,{onClick:n},"Logout")))))))}}]),t}(r.Component);Pt.defaultProps={user:null};var _t=wt(Pt),Lt=n(78),jt=n.n(Lt),Tt=(n(161),Object(i.b)(function(e){return{isLoading:e.loader.isLoading}})(function(e){return e.isLoading?a.a.createElement("div",{className:"react-loader"},a.a.createElement("div",null,a.a.createElement("div",null,a.a.createElement(jt.a,{type:"TailSpin",color:"#0099ca",height:50,width:50})))):null})),kt=(n(163),n(165),function(e){var t=e.children;return a.a.createElement("div",{className:"app-container"},a.a.createElement(r.Fragment,null,a.a.createElement(_t,null),t),a.a.createElement(K.a,{stack:{limit:3},timeout:3e3,position:"bottom"}),a.a.createElement(Tt,null))}),xt=function(e){return wt(function(t){var n=t.history,r=t.user,o=t.getUser;return r||o(n.push),r?a.a.createElement(e,t):null})};xt.defaultProps={user:null};var It=xt,At=(n(167),function(e){return a.a.createElement(kt,e,a.a.createElement(x.a,null,ot.map(function(e,t){var n=e.exact,r=e.path,o=e.component;return a.a.createElement(I.a,{key:t,exact:n,path:r,component:It(o)})}),ct.map(function(e,t){var n=e.exact,r=e.path,o=e.component;return a.a.createElement(I.a,{key:t,exact:n,path:r,component:wt(o)})})))});n(169);c.a.render(a.a.createElement(i.a,{store:k},a.a.createElement(u.a,null,a.a.createElement(At,null))),document.getElementById("root"))},76:function(e){e.exports={GOOGLE_CLIENT_ID:"995595589642-jnb75k2987o38i8goj9hr6fuho5tn4i6.apps.googleusercontent.com"}},79:function(e,t,n){e.exports=n(171)}},[[79,2,1]]]);
//# sourceMappingURL=main.39a03572.chunk.js.map